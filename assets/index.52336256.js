const n=document.getElementById("board"),e=document.getElementById("win-overlay-horizontal"),l=document.getElementById("win-overlay-vertical"),i=document.getElementById("reset");let t=[],r=[];document.querySelectorAll("input[type=radio]");const a={currentPlayer:1,lastPlayed:null,cellState:[],winner:null,winningCells:[]};function c(e){if(e<=0)return r=Array.from(document.querySelectorAll(".cell")),void r.forEach((n=>{n.addEventListener("click",(n=>{1===a.currentPlayer&&d(n.target,a.currentPlayer)}))}));t.push(`cell-${e.toString()}`),a.cellState.push(null),n.innerHTML+=`<button class="cell" id="cell-${t.length}"></button>`,c(e-1)}function d(t,d){const u=r.indexOf(t);var o;null===a.winner&&(null===a.cellState[u]&&(a.lastPlayed=d,a.cellState[u]=d,t.innerHTML=1===d?'\n<svg \n  class="c"\n  viewBox="0 0 105 105"\n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M52.2046 52L102 101.593L103.417 100.181L53.6217 50.5887L102 2.4075L100.583 0.996175L52.2046 49.1774L3.41705 0.588684L1.99996 2.00001L50.7875 50.5887L0.582886 100.589L1.99998 102L52.2046 52Z" />\n</svg>\n':'\n<svg \n  class="c"\n  viewBox="0 0 102 102" \n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M50 98C76.5097 98 98 76.5097 98 50C98 23.4903 76.5097 2 50 2C23.4903 2 2 23.4903 2 50C2 76.5097 23.4903 98 50 98ZM50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" />\n</svg>\n',0!==(o=function(n){let e=0,l=[];return n[0]===n[1]&&n[1]===n[2]&&null!==n[0]&&(e=n[0],l=[0,1,2]),n[3]===n[4]&&n[4]===n[5]&&null!==n[3]&&(e=n[3],l=[3,4,5]),n[6]===n[7]&&n[7]===n[8]&&null!==n[6]&&(e=n[6],l=[6,7,8]),n[0]===n[3]&&n[3]===n[6]&&null!==n[0]&&(e=n[0],l=[0,3,6]),n[1]===n[4]&&n[4]===n[7]&&null!==n[1]&&(e=n[1],l=[1,4,7]),n[2]===n[5]&&n[5]===n[8]&&null!==n[2]&&(e=n[2],l=[2,5,8]),n[0]===n[4]&&n[4]===n[8]&&null!==n[0]&&(e=n[0],l=[0,4,8]),n[2]===n[4]&&n[4]===n[6]&&null!==n[2]&&(e=n[2],l=[2,4,6]),0!==l.length||n.includes(null)||(e=3),{winningPlayer:e,winningCellIndexes:l}}(a.cellState)).winningPlayer?(a.winner=o.winningPlayer,a.winningCells=o.winningCellIndexes,function(t){let d="";0===t[0]&&8===t[t.length-1]?(d='\n      <div class="win-line d-line"></div>\n    ',e.innerHTML+=d):2===t[0]&&6===t[t.length-1]?(d='<div class="win-line e-line"></div>',e.innerHTML+=d):t[2]-t[1]<2?(0===t[0]?d='<div class="win-line a-line"></div>':3===t[0]?d='<div class="win-line b-line"></div>':6===t[0]&&(d='<div class="win-line c-line"></div>'),e.innerHTML+=d):(0===t[0]?d='<div class="win-line a-line"></div>':1===t[0]?d='<div class="win-line b-line"></div>':2===t[0]&&(d='<div class="win-line c-line"></div>'),l.innerHTML+=d),function(){let t=document.createElement("button"),d=document.createElement("h2");t.innerText="Play Again",t.classList.add("reset-button"),d.classList.add("reset-title"),t.addEventListener("click",(t=>{!function(){const t=[e,l,i,n];r.forEach((n=>{n.innerHTML=""})),t.forEach((n=>{n.innerHTML=""})),i.style.pointerEvents="none",a.lastPlayed=null,a.cellState=[],a.winner=null,a.winningCells=[],a.currentPlayer=1,c(9)}()})),1===a.winner?(d.innerText="YOU WIN!",d.classList.add("win-title")):2===a.winner?(d.innerText="YOU LOSE",d.classList.add("lose-title")):3===a.winner&&(d.innerText="DRAW",d.classList.add("draw-title")),i.style.pointerEvents="auto",i.appendChild(d),i.appendChild(t)}()}(a.winningCells)):1===a.currentPlayer?(a.currentPlayer=2,setTimeout((()=>{s()}),1e3)):2===a.currentPlayer&&(a.currentPlayer=1)))}function s(){if(a.cellState.includes(null)){const n=Math.floor(Math.random()*(r.length-1));null===a.cellState[n]?d(r[n],2):s()}}window.onload=()=>{c(9)};
