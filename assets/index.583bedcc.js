const n=document.getElementById("board"),e=document.getElementById("win-overlay-horizontal"),l=document.getElementById("win-overlay-vertical"),t=document.getElementById("reset");let i=[],r=[];document.querySelectorAll("input[type=radio]");const a={currentPlayer:1,lastPlayed:null,cellState:[],winner:null,winningCells:[]};function c(e){if(e<=0)return r=Array.from(document.querySelectorAll(".cell")),r.forEach((n=>{n.addEventListener("click",(n=>{1===a.currentPlayer&&d(n.target,a.currentPlayer)}))})),void function(){let n="";Array.from(document.querySelectorAll("button")).forEach((e=>{const l=r.indexOf(e);n=l<=2?`Row one, cell ${(l+1).toString()}; Empty.`:l<=5&&l>2?`Row two, cell ${(l-2).toString()}; Empty.`:`Row three, cell ${(l-5).toString()}; Empty.`,e.setAttribute("aria-label",n)}))}();i.push(`cell-${e.toString()}`),a.cellState.push(null),n.innerHTML+=`<button class="cell" id="cell-${i.length}"></button>`,c(e-1)}function d(i,d){const o=r.indexOf(i);if(null!==a.winner)return;if(null!==a.cellState[o])return;a.lastPlayed=d,a.cellState[o]=d,i.innerHTML=1===d?'\n<svg \n  class="c"\n  viewBox="0 0 105 105"\n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M52.2046 52L102 101.593L103.417 100.181L53.6217 50.5887L102 2.4075L100.583 0.996175L52.2046 49.1774L3.41705 0.588684L1.99996 2.00001L50.7875 50.5887L0.582886 100.589L1.99998 102L52.2046 52Z" />\n</svg>\n':'\n<svg \n  class="c"\n  viewBox="0 0 102 102" \n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M50 98C76.5097 98 98 76.5097 98 50C98 23.4903 76.5097 2 50 2C23.4903 2 2 23.4903 2 50C2 76.5097 23.4903 98 50 98ZM50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" />\n</svg>\n';let u=i.getAttribute("aria-label");var w;u=u.replace(" Empty.",` Taken by player ${d.toString()}.`),i.setAttribute("aria-label",u),0!==(w=function(n){let e=0,l=[];return n[0]===n[1]&&n[1]===n[2]&&null!==n[0]&&(e=n[0],l=[0,1,2]),n[3]===n[4]&&n[4]===n[5]&&null!==n[3]&&(e=n[3],l=[3,4,5]),n[6]===n[7]&&n[7]===n[8]&&null!==n[6]&&(e=n[6],l=[6,7,8]),n[0]===n[3]&&n[3]===n[6]&&null!==n[0]&&(e=n[0],l=[0,3,6]),n[1]===n[4]&&n[4]===n[7]&&null!==n[1]&&(e=n[1],l=[1,4,7]),n[2]===n[5]&&n[5]===n[8]&&null!==n[2]&&(e=n[2],l=[2,5,8]),n[0]===n[4]&&n[4]===n[8]&&null!==n[0]&&(e=n[0],l=[0,4,8]),n[2]===n[4]&&n[4]===n[6]&&null!==n[2]&&(e=n[2],l=[2,4,6]),0!==l.length||n.includes(null)||(e=3),{winningPlayer:e,winningCellIndexes:l}}(a.cellState)).winningPlayer?(a.winner=w.winningPlayer,a.winningCells=w.winningCellIndexes,function(i){let d="";0===i[0]&&8===i[i.length-1]?(d='\n      <div class="win-line d-line"></div>\n    ',e.innerHTML+=d):2===i[0]&&6===i[i.length-1]?(d='<div class="win-line e-line"></div>',e.innerHTML+=d):i[2]-i[1]<2?(0===i[0]?d='<div class="win-line a-line"></div>':3===i[0]?d='<div class="win-line b-line"></div>':6===i[0]&&(d='<div class="win-line c-line"></div>'),e.innerHTML+=d):(0===i[0]?d='<div class="win-line a-line"></div>':1===i[0]?d='<div class="win-line b-line"></div>':2===i[0]&&(d='<div class="win-line c-line"></div>'),l.innerHTML+=d),function(){let i=document.createElement("button"),d=document.createElement("h2");i.innerText="Play Again",i.setAttribute("aria-label","Play Again"),i.classList.add("reset-button"),d.classList.add("reset-title"),i.addEventListener("click",(i=>{!function(){const i=[e,l,t,n];r.forEach((n=>{n.innerHTML=""})),i.forEach((n=>{n.innerHTML=""})),t.style.pointerEvents="none",a.lastPlayed=null,a.cellState=[],a.winner=null,a.winningCells=[],a.currentPlayer=1,c(9)}()})),1===a.winner?(d.innerText="YOU WIN!",d.classList.add("win-title")):2===a.winner?(d.innerText="YOU LOSE",d.classList.add("lose-title")):3===a.winner&&(d.innerText="DRAW",d.classList.add("draw-title")),t.style.pointerEvents="auto",t.appendChild(d),t.appendChild(i)}()}(a.winningCells)):1===a.currentPlayer?(a.currentPlayer=2,setTimeout((()=>{s()}),1e3)):2===a.currentPlayer&&(a.currentPlayer=1)}function s(){if(a.cellState.includes(null)){const n=Math.floor(Math.random()*(r.length-1));null===a.cellState[n]?d(r[n],2):s()}}window.onload=()=>{c(9)};
