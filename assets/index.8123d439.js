const e=document.getElementById("board"),n=document.getElementById("win-overlay-horizontal"),l=document.getElementById("win-overlay-vertical"),t=document.getElementById("reset");let i=[],r=[];document.querySelectorAll("input[type=radio]");const a={currentPlayer:1,lastPlayed:null,cellState:[],winner:null,winningCells:[]};function c(n){if(n<=0)return r=Array.from(document.querySelectorAll(".cell")),r.forEach((e=>{e.addEventListener("click",(e=>{1===a.currentPlayer&&s(e.target,a.currentPlayer)}))})),void function(){let e="";Array.from(document.querySelectorAll("button")).forEach((n=>{const l=r.indexOf(n);e=l<=2?`Row one, cell ${(l+1).toString()}; Empty.`:l<=5&&l>2?`Row two, cell ${(l-2).toString()}; Empty.`:`Row three, cell ${(l-5).toString()}; Empty.`,n.setAttribute("aria-label",e)}))}();i.push(`cell-${n.toString()}`),a.cellState.push(null),e.innerHTML+=`<button class="cell" id="cell-${i.length}"></button>`,c(n-1)}function s(i,s){const o=r.indexOf(i);if(null!==a.winner)return;if(null!==a.cellState[o])return;a.lastPlayed=s,a.cellState[o]=s,i.innerHTML=1===s?'\n<svg \n  class="c"\n  viewBox="0 0 105 105"\n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M52.2046 52L102 101.593L103.417 100.181L53.6217 50.5887L102 2.4075L100.583 0.996175L52.2046 49.1774L3.41705 0.588684L1.99996 2.00001L50.7875 50.5887L0.582886 100.589L1.99998 102L52.2046 52Z" />\n</svg>\n':'\n<svg \n  class="c"\n  viewBox="0 0 102 102" \n  fill-rule="evenodd"\n  clip-rule="evenodd"\n>\n<path d="M50 98C76.5097 98 98 76.5097 98 50C98 23.4903 76.5097 2 50 2C23.4903 2 2 23.4903 2 50C2 76.5097 23.4903 98 50 98ZM50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" />\n</svg>\n';let u=i.getAttribute("aria-label");var w;u=u.replace(" Empty.",` Taken by player ${s.toString()}.`),i.setAttribute("aria-label",u),0!==(w=function(e){let n=0,l=[];return e[0]===e[1]&&e[1]===e[2]&&null!==e[0]&&(n=e[0],l=[0,1,2]),e[3]===e[4]&&e[4]===e[5]&&null!==e[3]&&(n=e[3],l=[3,4,5]),e[6]===e[7]&&e[7]===e[8]&&null!==e[6]&&(n=e[6],l=[6,7,8]),e[0]===e[3]&&e[3]===e[6]&&null!==e[0]&&(n=e[0],l=[0,3,6]),e[1]===e[4]&&e[4]===e[7]&&null!==e[1]&&(n=e[1],l=[1,4,7]),e[2]===e[5]&&e[5]===e[8]&&null!==e[2]&&(n=e[2],l=[2,5,8]),e[0]===e[4]&&e[4]===e[8]&&null!==e[0]&&(n=e[0],l=[0,4,8]),e[2]===e[4]&&e[4]===e[6]&&null!==e[2]&&(n=e[2],l=[2,4,6]),0!==l.length||e.includes(null)||(n=3),{winningPlayer:n,winningCellIndexes:l}}(a.cellState)).winningPlayer?(a.winner=w.winningPlayer,a.winningCells=w.winningCellIndexes,function(i){let s="";0===i[0]&&8===i[i.length-1]?(s='\n      <div class="win-line d-line"></div>\n    ',n.innerHTML+=s):2===i[0]&&6===i[i.length-1]?(s='<div class="win-line e-line"></div>',n.innerHTML+=s):i[2]-i[1]<2?(0===i[0]?s='<div class="win-line a-line"></div>':3===i[0]?s='<div class="win-line b-line"></div>':6===i[0]&&(s='<div class="win-line c-line"></div>'),n.innerHTML+=s):(0===i[0]?s='<div class="win-line a-line"></div>':1===i[0]?s='<div class="win-line b-line"></div>':2===i[0]&&(s='<div class="win-line c-line"></div>'),l.innerHTML+=s),function(){let i=document.createElement("button"),s=document.createElement("h2");i.innerText="Play Again",i.setAttribute("aria-label","Play Again"),i.classList.add("reset-button"),s.classList.add("reset-title"),i.addEventListener("click",(i=>{!function(){const i=[n,l,t,e];r.forEach((e=>{e.innerHTML=""})),i.forEach((e=>{e.innerHTML=""})),t.style.pointerEvents="none",a.lastPlayed=null,a.cellState=[],a.winner=null,a.winningCells=[],a.currentPlayer=1,c(9)}()})),1===a.winner?(s.innerText="YOU WIN!",s.classList.add("win-title")):2===a.winner?(s.innerText="YOU LOSE",s.classList.add("lose-title")):3===a.winner&&(s.innerText="DRAW",s.classList.add("draw-title")),s.setAttribute("role","alert"),t.style.pointerEvents="auto",setTimeout((()=>{t.appendChild(s),t.appendChild(i)}),1e3)}()}(a.winningCells)):1===a.currentPlayer?(a.currentPlayer=2,setTimeout((()=>{d()}),1e3)):2===a.currentPlayer&&(a.currentPlayer=1)}function d(){if(a.cellState.includes(null)){const e=Math.floor(Math.random()*(r.length-1));null===a.cellState[e]?s(r[e],2):d()}}window.onload=()=>{c(9)};
